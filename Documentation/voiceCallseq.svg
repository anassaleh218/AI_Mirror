<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="678px" preserveAspectRatio="none" style="width:673px;height:678px;background:#FFFFFF;" version="1.1" viewBox="0 0 673 678" width="673px" zoomAndPan="magnify"><title>Sequence Diagram: Voice Call Interaction</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="328.2002" x="174.1223" y="27.9951">Sequence Diagram: Voice Call Interaction</text><g><title>Python Server (FastAPI)</title><rect fill="#FFFFFF" height="109.6641" style="stroke:#696969;stroke-width:1;" width="10" x="506.9834" y="305.3906"/></g><rect fill="none" height="117.5313" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1;" width="443.4473" x="10" y="135.5938"/><rect fill="none" height="155.9297" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1;" width="492.4692" x="174.9756" y="267.125"/><rect fill="none" height="143.5313" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1;" width="446.0815" x="10" y="437.0547"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="478.9922" width="8" x="34.9551" y="118.5938"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="38" x2="38" y1="118.5938" y2="597.5859"/></g><g><title>CallScreen (App)</title><rect fill="#000000" fill-opacity="0.00000" height="478.9922" width="8" x="246.6245" y="118.5938"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="249.9756" x2="249.9756" y1="118.5938" y2="597.5859"/></g><g><title>Python Server (FastAPI)</title><rect fill="#000000" fill-opacity="0.00000" height="478.9922" width="8" x="507.9834" y="118.5938"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="511.0703" x2="511.0703" y1="118.5938" y2="597.5859"/></g><g class="participant participant-head" data-participant="User"><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="20" y="115.292">User</text><ellipse cx="38.9551" cy="50.7969" fill="#454645" rx="8" ry="8" style="stroke:#454645;stroke-width:0.5;"/><path d="M38.9551,58.7969 L38.9551,85.7969 M25.9551,66.7969 L51.9551,66.7969 M38.9551,85.7969 L25.9551,100.7969 M38.9551,85.7969 L51.9551,100.7969" fill="none" style="stroke:#454645;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="20" y="609.5811">User</text><ellipse cx="38.9551" cy="621.3828" fill="#454645" rx="8" ry="8" style="stroke:#454645;stroke-width:0.5;"/><path d="M38.9551,629.3828 L38.9551,656.3828 M25.9551,637.3828 L51.9551,637.3828 M38.9551,656.3828 L25.9551,671.3828 M38.9551,656.3828 L51.9551,671.3828" fill="none" style="stroke:#454645;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="App"><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="131.2979" x="184.9756" y="87.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.2979" x="191.9756" y="107.292">CallScreen (App)</text></g><g class="participant participant-tail" data-participant="App"><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="131.2979" x="184.9756" y="596.5859"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.2979" x="191.9756" y="616.5811">CallScreen (App)</text></g><g class="participant participant-head" data-participant="Server"><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="179.8262" x="422.0703" y="87.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165.8262" x="429.0703" y="107.292">Python Server (FastAPI)</text></g><g class="participant participant-tail" data-participant="Server"><rect fill="#FF6347" height="30.2969" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="179.8262" x="422.0703" y="596.5859"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165.8262" x="429.0703" y="616.5811">Python Server (FastAPI)</text></g><g><title>Python Server (FastAPI)</title><rect fill="#FFFFFF" height="109.6641" style="stroke:#696969;stroke-width:1;" width="10" x="506.9834" y="305.3906"/></g><path d="M13.5,135.5938 L145.689,135.5938 L145.689,142.7266 L135.689,152.7266 L10,152.7266 L10,139.0938 A3.5,3.5 0 0 1 13.5,135.5938" fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="117.5313" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1;" width="443.4473" x="10" y="135.5938"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="90.689" x="25" y="148.6606">User Speaks</text><g class="message" data-participant-1="User" data-participant-2="App"><polygon fill="#454645" points="238.6245,169.8594,248.6245,173.8594,238.6245,177.8594,242.6245,173.8594" style="stroke:#454645;stroke-width:1;"/><line style="stroke:#454645;stroke-width:1;" x1="38.9551" x2="244.6245" y1="173.8594" y2="173.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="45.9551" y="168.7935">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.624" x="59.0005" y="168.7935">Holds mic button &amp; speaks</text></g><g class="message" data-participant-1="App" data-participant-2="App"><line style="stroke:#454645;stroke-width:1;" x1="250.6245" x2="292.6245" y1="202.9922" y2="202.9922"/><line style="stroke:#454645;stroke-width:1;" x1="292.6245" x2="292.6245" y1="202.9922" y2="215.9922"/><line style="stroke:#454645;stroke-width:1;" x1="251.6245" x2="292.6245" y1="215.9922" y2="215.9922"/><polygon fill="#454645" points="261.6245,211.9922,251.6245,215.9922,261.6245,219.9922,257.6245,215.9922" style="stroke:#454645;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="257.6245" y="197.9263">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.7773" x="270.6699" y="197.9263">Records audio to local URI</text></g><g class="message" data-participant-1="User" data-participant-2="App"><polygon fill="#454645" points="238.6245,241.125,248.6245,245.125,238.6245,249.125,242.6245,245.125" style="stroke:#454645;stroke-width:1;"/><line style="stroke:#454645;stroke-width:1;" x1="38.9551" x2="244.6245" y1="245.125" y2="245.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="45.9551" y="240.0591">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.1616" x="59.0005" y="240.0591">Releases button</text></g><path d="M178.4756,267.125 L366.7969,267.125 L366.7969,274.2578 L356.7969,284.2578 L174.9756,284.2578 L174.9756,270.625 A3.5,3.5 0 0 1 178.4756,267.125" fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="155.9297" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1;" width="492.4692" x="174.9756" y="267.125"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="146.8213" x="189.9756" y="280.1919">Backend Processing</text><g class="message" data-participant-1="App" data-participant-2="Server"><polygon fill="#454645" points="494.9834,301.3906,504.9834,305.3906,494.9834,309.3906,498.9834,305.3906" style="stroke:#454645;stroke-width:1;"/><line style="stroke:#454645;stroke-width:1;" x1="250.6245" x2="500.9834" y1="305.3906" y2="305.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="257.6245" y="300.3247">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224.3135" x="270.6699" y="300.3247">POST /call (characterId, audio_file)</text></g><path d="M365,321.8906 L365,384.8906 A3.5,3.5 0 0 0 368.5,388.3906 L653.5,388.3906 A3.5,3.5 0 0 0 657,384.8906 L657,328.3906 L647,318.3906 L368.5,318.3906 A3.5,3.5 0 0 0 365,321.8906" fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M647,318.3906 L647,326.6406 A1.75,1.75 0 0 0 648.75,328.3906 L657,328.3906 L647,318.3906" fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221.7617" x="371" y="335.4575">1. Transcribe audio using Whisper</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.8887" x="371" y="350.5903">2. RAG Search in FAISS memory</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249.1899" x="371" y="365.7231">3. Construct Prompt &amp; Call LLM (Groq)</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271.4448" x="371" y="380.856">4. Synthesize LLM reply to audio with TTS</text><g class="message" data-participant-1="Server" data-participant-2="App"><polygon fill="#454645" points="261.6245,411.0547,251.6245,415.0547,261.6245,419.0547,257.6245,415.0547" style="stroke:#454645;stroke-width:1;"/><line style="stroke:#454645;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="255.6245" x2="510.9834" y1="415.0547" y2="415.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="267.6245" y="409.9888">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.5791" x="280.6699" y="409.9888">return FileResponse(audio_file)</text></g><path d="M13.5,437.0547 L155.6802,437.0547 L155.6802,444.1875 L145.6802,454.1875 L10,454.1875 L10,440.5547 A3.5,3.5 0 0 1 13.5,437.0547" fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="143.5313" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1;" width="446.0815" x="10" y="437.0547"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="100.6802" x="25" y="450.1216">Bot Responds</text><g class="message" data-participant-1="App" data-participant-2="App"><line style="stroke:#454645;stroke-width:1;" x1="250.6245" x2="292.6245" y1="475.3203" y2="475.3203"/><line style="stroke:#454645;stroke-width:1;" x1="292.6245" x2="292.6245" y1="475.3203" y2="488.3203"/><line style="stroke:#454645;stroke-width:1;" x1="251.6245" x2="292.6245" y1="488.3203" y2="488.3203"/><polygon fill="#454645" points="261.6245,484.3203,251.6245,488.3203,261.6245,492.3203,257.6245,488.3203" style="stroke:#454645;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="257.6245" y="470.2544">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.4116" x="270.6699" y="470.2544">Receives audio file as blob</text></g><g class="message" data-participant-1="App" data-participant-2="App"><line style="stroke:#454645;stroke-width:1;" x1="250.6245" x2="292.6245" y1="517.4531" y2="517.4531"/><line style="stroke:#454645;stroke-width:1;" x1="292.6245" x2="292.6245" y1="517.4531" y2="530.4531"/><line style="stroke:#454645;stroke-width:1;" x1="251.6245" x2="292.6245" y1="530.4531" y2="530.4531"/><polygon fill="#454645" points="261.6245,526.4531,251.6245,530.4531,261.6245,534.4531,257.6245,530.4531" style="stroke:#454645;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="257.6245" y="512.3872">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.7441" x="270.6699" y="512.3872">Saves blob and plays it</text></g><g class="message" data-participant-1="User" data-participant-2="User"><line style="stroke:#454645;stroke-width:1;" x1="38.9551" x2="80.9551" y1="559.5859" y2="559.5859"/><line style="stroke:#454645;stroke-width:1;" x1="80.9551" x2="80.9551" y1="559.5859" y2="572.5859"/><line style="stroke:#454645;stroke-width:1;" x1="39.9551" x2="80.9551" y1="572.5859" y2="572.5859"/><polygon fill="#454645" points="49.9551,568.5859,39.9551,572.5859,49.9551,576.5859,45.9551,572.5859" style="stroke:#454645;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="45.9551" y="554.52">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.8579" x="59.0005" y="554.52">Hears voice response</text></g><!--SRC=[RL9DRzim3BtxLt0z30wmPjZ7AOS1QOTs1ZeiiDFj4c2WPJOMAaig9NlmVlqeEzxwCLyiIezyv7jy5Llg20PTCzgOHHqDGKKFFLb5y5dZaR7Rm7Ud9Rn4Ow2maHXLrCvc6VRHsRwhYJEvSWotGOuUEMgblLI4ivHKAIQoa6-zNvq11f33KzHkZAspmim3CUHN6E9sLypW-JBBZknwFp50vGdlGmRoJV7vfrHo0r-SQG9qMa7THsaDNaFu1nN8NsH9oh5WiM-qW-Z0E8K6RilYPTMI366WS2gQaMsMRYvGtKi8EtQAGj3s-9Xfxdm3ks_L7jwg95-kMapo4HVDcvdzvvqsj9hoagu3HbfcJdVMIUoIB4kvTslOYrr1iQxfD46VkE57gsLUFjZtQoYtrvA1h5hG5gwsHLL1HvtZyM0_hE7IsH2vLp7rtlaeKat-tjnyXVoQtSFgO3-keHgjh4ZGlsbwOV9cJ7BDhBzqR66_hwP6J-QTBx8nnPw5MQOhANZXe_pvm0qz7_cnk2x2dDdyrq3I0oqEff9fMMhZwXVO2XCmFG6AMTxW64379qwdlooG21PWcDQTJqsdblu0]--></g></svg>