<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1234px" preserveAspectRatio="none" style="width:1052px;height:1234px;background:#FFFFFF;" version="1.1" viewBox="0 0 1052 1234" width="1052px" zoomAndPan="magnify"><title>Chat System Sequence Diagram</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="252.9707" x="400.645" y="27.9951">Chat System Sequence Diagram</text><g><title>Backend (FastAPI)</title><rect fill="#FFFFFF" height="145.6641" style="stroke:#181818;stroke-width:1;" width="10" x="564.4443" y="369.6563"/></g><g><title>Backend (FastAPI)</title><rect fill="#FFFFFF" height="203.9297" style="stroke:#181818;stroke-width:1;" width="10" x="564.4443" y="846.3203"/></g><g><title>Whisper (STT)</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="731.6836" y="875.4531"/></g><g><title>FAISS (RAG)</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="847.4731" y="398.7891"/></g><g><title>FAISS (RAG)</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="847.4731" y="933.7188"/></g><g><title>GroqAPI (LLM)</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="963.6318" y="457.0547"/></g><g><title>GroqAPI (LLM)</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="963.6318" y="991.9844"/></g><rect fill="none" height="1000.9219" style="stroke:#000000;stroke-width:1.5;" width="1035.2607" x="10" y="135.5938"/><rect fill="none" height="376.5938" style="stroke:#000000;stroke-width:1.5;" width="958.0552" x="77.2056" y="217.9922"/><rect fill="none" height="363.5938" style="stroke:#000000;stroke-width:1.5;" width="958.0552" x="77.2056" y="765.9219"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="1034.9219" width="8" x="34.9551" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="38" x2="38" y1="118.5938" y2="1153.5156"/></g><g><title>ChatScreen (React Native)</title><rect fill="#000000" fill-opacity="0.00000" height="1034.9219" width="8" x="183.4136" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="187.2056" x2="187.2056" y1="118.5938" y2="1153.5156"/></g><g><title>AsyncStorage</title><rect fill="#000000" fill-opacity="0.00000" height="1034.9219" width="8" x="429.5435" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="433.292" x2="433.292" y1="118.5938" y2="1153.5156"/></g><g><title>Backend (FastAPI)</title><rect fill="#000000" fill-opacity="0.00000" height="1034.9219" width="8" x="565.4443" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="568.7949" x2="568.7949" y1="118.5938" y2="1153.5156"/></g><g><title>Whisper (STT)</title><rect fill="#000000" fill-opacity="0.00000" height="1034.9219" width="8" x="732.6836" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="736.4238" x2="736.4238" y1="118.5938" y2="1153.5156"/></g><g><title>FAISS (RAG)</title><rect fill="#000000" fill-opacity="0.00000" height="1034.9219" width="8" x="848.4731" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="851.9434" x2="851.9434" y1="118.5938" y2="1153.5156"/></g><g><title>GroqAPI (LLM)</title><rect fill="#000000" fill-opacity="0.00000" height="1034.9219" width="8" x="964.6318" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="968.0029" x2="968.0029" y1="118.5938" y2="1153.5156"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="20" y="115.292">User</text><ellipse cx="38.9551" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.9551,58.7969 L38.9551,85.7969 M25.9551,66.7969 L51.9551,66.7969 M38.9551,85.7969 L25.9551,100.7969 M38.9551,85.7969 L51.9551,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="20" y="1165.5107">User</text><ellipse cx="38.9551" cy="1177.3125" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.9551,1185.3125 L38.9551,1212.3125 M25.9551,1193.3125 L51.9551,1193.3125 M38.9551,1212.3125 L25.9551,1227.3125 M38.9551,1212.3125 L51.9551,1227.3125" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Frontend"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="200.416" x="87.2056" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186.416" x="94.2056" y="107.292">ChatScreen (React Native)</text></g><g class="participant participant-tail" data-participant="Frontend"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="200.416" x="87.2056" y="1152.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186.416" x="94.2056" y="1172.5107">ChatScreen (React Native)</text></g><g class="participant participant-head" data-participant="Storage"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110.5029" x="378.292" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.5029" x="385.292" y="107.292">AsyncStorage</text></g><g class="participant participant-tail" data-participant="Storage"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110.5029" x="378.292" y="1152.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.5029" x="385.292" y="1172.5107">AsyncStorage</text></g><g class="participant participant-head" data-participant="Backend"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141.2988" x="498.7949" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.2988" x="505.7949" y="107.292">Backend (FastAPI)</text></g><g class="participant participant-tail" data-participant="Backend"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141.2988" x="498.7949" y="1152.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.2988" x="505.7949" y="1172.5107">Backend (FastAPI)</text></g><g class="participant participant-head" data-participant="Whisper"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.5195" x="680.4238" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.5195" x="687.4238" y="107.292">Whisper (STT)</text></g><g class="participant participant-tail" data-participant="Whisper"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.5195" x="680.4238" y="1152.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.5195" x="687.4238" y="1172.5107">Whisper (STT)</text></g><g class="participant participant-head" data-participant="FAISS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.0596" x="802.9434" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.0596" x="809.9434" y="107.292">FAISS (RAG)</text></g><g class="participant participant-tail" data-participant="FAISS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.0596" x="802.9434" y="1152.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.0596" x="809.9434" y="1172.5107">FAISS (RAG)</text></g><g class="participant participant-head" data-participant="Groq"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113.2578" x="912.0029" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.2578" x="919.0029" y="107.292">GroqAPI (LLM)</text></g><g class="participant participant-tail" data-participant="Groq"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113.2578" x="912.0029" y="1152.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.2578" x="919.0029" y="1172.5107">GroqAPI (LLM)</text></g><g><title>Backend (FastAPI)</title><rect fill="#FFFFFF" height="145.6641" style="stroke:#181818;stroke-width:1;" width="10" x="564.4443" y="369.6563"/></g><g><title>Backend (FastAPI)</title><rect fill="#FFFFFF" height="203.9297" style="stroke:#181818;stroke-width:1;" width="10" x="564.4443" y="846.3203"/></g><g><title>Whisper (STT)</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="731.6836" y="875.4531"/></g><g><title>FAISS (RAG)</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="847.4731" y="398.7891"/></g><g><title>FAISS (RAG)</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="847.4731" y="933.7188"/></g><g><title>GroqAPI (LLM)</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="963.6318" y="457.0547"/></g><g><title>GroqAPI (LLM)</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="963.6318" y="991.9844"/></g><path d="M10,135.5938 L74.4429,135.5938 L74.4429,142.7266 L64.4429,152.7266 L10,152.7266 L10,135.5938" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1000.9219" style="stroke:#000000;stroke-width:1.5;" width="1035.2607" x="10" y="135.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="148.6606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128.2939" x="89.4429" y="147.8042">[Text Message Flow]</text><g class="message" data-participant-1="User" data-participant-2="Frontend"><polygon fill="#181818" points="175.4136,169.8594,185.4136,173.8594,175.4136,177.8594,179.4136,173.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.9551" x2="181.4136" y1="173.8594" y2="173.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.4585" x="45.9551" y="168.7935">Type text message</text></g><g class="message" data-participant-1="User" data-participant-2="Frontend"><polygon fill="#181818" points="175.4136,198.9922,185.4136,202.9922,175.4136,206.9922,179.4136,202.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.9551" x2="181.4136" y1="202.9922" y2="202.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.9976" x="45.9551" y="197.9263">Click 'Send'</text></g><path d="M77.2056,217.9922 L293.3511,217.9922 L293.3511,225.125 L283.3511,235.125 L77.2056,235.125 L77.2056,217.9922" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="376.5938" style="stroke:#000000;stroke-width:1.5;" width="958.0552" x="77.2056" y="217.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="171.1455" x="92.2056" y="231.0591">Handling Text Message</text><g class="message" data-participant-1="Frontend" data-participant-2="Frontend"><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="229.4136" y1="256.2578" y2="256.2578"/><line style="stroke:#181818;stroke-width:1;" x1="229.4136" x2="229.4136" y1="256.2578" y2="269.2578"/><line style="stroke:#181818;stroke-width:1;" x1="188.4136" x2="229.4136" y1="269.2578" y2="269.2578"/><polygon fill="#181818" points="198.4136,265.2578,188.4136,269.2578,198.4136,273.2578,194.4136,269.2578" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.3823" x="194.4136" y="251.1919">sendMessage()</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Frontend"><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="229.4136" y1="298.3906" y2="298.3906"/><line style="stroke:#181818;stroke-width:1;" x1="229.4136" x2="229.4136" y1="298.3906" y2="311.3906"/><line style="stroke:#181818;stroke-width:1;" x1="188.4136" x2="229.4136" y1="311.3906" y2="311.3906"/><polygon fill="#181818" points="198.4136,307.3906,188.4136,311.3906,198.4136,315.3906,194.4136,311.3906" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.6177" x="194.4136" y="293.3247">Add message to UI</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Storage"><polygon fill="#181818" points="421.5435,336.5234,431.5435,340.5234,421.5435,344.5234,425.5435,340.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="427.5435" y1="340.5234" y2="340.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.1299" x="194.4136" y="335.4575">saveMessages(updatedMessages)</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Backend"><polygon fill="#181818" points="552.4443,365.6563,562.4443,369.6563,552.4443,373.6563,556.4443,369.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="558.4443" y1="369.6563" y2="369.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="314.4565" x="194.4136" y="364.5903">POST /chat (message, characterId, chat_history)</text></g><g class="message" data-participant-1="Backend" data-participant-2="FAISS"><polygon fill="#181818" points="835.4731,394.7891,845.4731,398.7891,835.4731,402.7891,839.4731,398.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="574.4443" x2="841.4731" y1="398.7891" y2="398.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.1582" x="581.4443" y="393.7231">search(query_embedding)</text></g><g class="message" data-participant-1="FAISS" data-participant-2="Backend"><polygon fill="#181818" points="585.4443,423.9219,575.4443,427.9219,585.4443,431.9219,581.4443,427.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="579.4443" x2="851.4731" y1="427.9219" y2="427.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.3545" x="591.4443" y="422.856">context snippets</text></g><g class="message" data-participant-1="Backend" data-participant-2="Groq"><polygon fill="#181818" points="951.6318,453.0547,961.6318,457.0547,951.6318,461.0547,955.6318,457.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="574.4443" x2="957.6318" y1="457.0547" y2="457.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.2524" x="581.4443" y="451.9888">POST /v1/chat/completions</text></g><g class="message" data-participant-1="Groq" data-participant-2="Backend"><polygon fill="#181818" points="585.4443,482.1875,575.4443,486.1875,585.4443,490.1875,581.4443,486.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="579.4443" x2="967.6318" y1="486.1875" y2="486.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.335" x="591.4443" y="481.1216">bot reply</text></g><g class="message" data-participant-1="Backend" data-participant-2="Frontend"><polygon fill="#181818" points="198.4136,511.3203,188.4136,515.3203,198.4136,519.3203,194.4136,515.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="192.4136" x2="568.4443" y1="515.3203" y2="515.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.8818" x="204.4136" y="510.2544">JSON { reply }</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Frontend"><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="229.4136" y1="544.4531" y2="544.4531"/><line style="stroke:#181818;stroke-width:1;" x1="229.4136" x2="229.4136" y1="544.4531" y2="557.4531"/><line style="stroke:#181818;stroke-width:1;" x1="188.4136" x2="229.4136" y1="557.4531" y2="557.4531"/><polygon fill="#181818" points="198.4136,553.4531,188.4136,557.4531,198.4136,561.4531,194.4136,557.4531" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.562" x="194.4136" y="539.3872">Update UI</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Storage"><polygon fill="#181818" points="421.5435,582.5859,431.5435,586.5859,421.5435,590.5859,425.5435,586.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="427.5435" y1="586.5859" y2="586.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.0791" x="194.4136" y="581.52">saveMessages(finalMessages)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="1045.2607" y1="602.5859" y2="602.5859"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="134.7983" x="15" y="612.7964">[Voice Message Flow]</text><g class="message" data-participant-1="User" data-participant-2="Frontend"><polygon fill="#181818" points="175.4136,633.5234,185.4136,637.5234,175.4136,641.5234,179.4136,637.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.9551" x2="181.4136" y1="637.5234" y2="637.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.7212" x="45.9551" y="632.4575">Start Recording</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Frontend"><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="229.4136" y1="666.6563" y2="666.6563"/><line style="stroke:#181818;stroke-width:1;" x1="229.4136" x2="229.4136" y1="666.6563" y2="679.6563"/><line style="stroke:#181818;stroke-width:1;" x1="188.4136" x2="229.4136" y1="679.6563" y2="679.6563"/><polygon fill="#181818" points="198.4136,675.6563,188.4136,679.6563,198.4136,683.6563,194.4136,679.6563" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.2534" x="194.4136" y="661.5903">startRecording()</text></g><g class="message" data-participant-1="User" data-participant-2="Frontend"><polygon fill="#181818" points="175.4136,704.7891,185.4136,708.7891,175.4136,712.7891,179.4136,708.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.9551" x2="181.4136" y1="708.7891" y2="708.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.5186" x="45.9551" y="703.7231">Stop Recording</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Frontend"><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="229.4136" y1="737.9219" y2="737.9219"/><line style="stroke:#181818;stroke-width:1;" x1="229.4136" x2="229.4136" y1="737.9219" y2="750.9219"/><line style="stroke:#181818;stroke-width:1;" x1="188.4136" x2="229.4136" y1="750.9219" y2="750.9219"/><polygon fill="#181818" points="198.4136,746.9219,188.4136,750.9219,198.4136,754.9219,194.4136,750.9219" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.0508" x="194.4136" y="732.856">stopRecording()</text></g><path d="M77.2056,765.9219 L301.0381,765.9219 L301.0381,773.0547 L291.0381,783.0547 L77.2056,783.0547 L77.2056,765.9219" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="363.5938" style="stroke:#000000;stroke-width:1.5;" width="958.0552" x="77.2056" y="765.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="178.8325" x="92.2056" y="778.9888">Handling Voice Message</text><g class="message" data-participant-1="Frontend" data-participant-2="Frontend"><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="229.4136" y1="804.1875" y2="804.1875"/><line style="stroke:#181818;stroke-width:1;" x1="229.4136" x2="229.4136" y1="804.1875" y2="817.1875"/><line style="stroke:#181818;stroke-width:1;" x1="188.4136" x2="229.4136" y1="817.1875" y2="817.1875"/><polygon fill="#181818" points="198.4136,813.1875,188.4136,817.1875,198.4136,821.1875,194.4136,817.1875" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.8267" x="194.4136" y="799.1216">sendAudioMessage(audioUri)</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Backend"><polygon fill="#181818" points="552.4443,842.3203,562.4443,846.3203,552.4443,850.3203,556.4443,846.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="558.4443" y1="846.3203" y2="846.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="315.9863" x="194.4136" y="841.2544">POST /chat (audio file, characterId, chat_history)</text></g><g class="message" data-participant-1="Backend" data-participant-2="Whisper"><polygon fill="#181818" points="719.6836,871.4531,729.6836,875.4531,719.6836,879.4531,723.6836,875.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="574.4443" x2="725.6836" y1="875.4531" y2="875.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.2393" x="581.4443" y="870.3872">transcribe(audio_file)</text></g><g class="message" data-participant-1="Whisper" data-participant-2="Backend"><polygon fill="#181818" points="585.4443,900.5859,575.4443,904.5859,585.4443,908.5859,581.4443,904.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="579.4443" x2="735.6836" y1="904.5859" y2="904.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62.8735" x="591.4443" y="899.52">transcript</text></g><g class="message" data-participant-1="Backend" data-participant-2="FAISS"><polygon fill="#181818" points="835.4731,929.7188,845.4731,933.7188,835.4731,937.7188,839.4731,933.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="574.4443" x2="841.4731" y1="933.7188" y2="933.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.5044" x="581.4443" y="928.6528">search(transcript_embedding)</text></g><g class="message" data-participant-1="FAISS" data-participant-2="Backend"><polygon fill="#181818" points="585.4443,958.8516,575.4443,962.8516,585.4443,966.8516,581.4443,962.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="579.4443" x2="851.4731" y1="962.8516" y2="962.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.3545" x="591.4443" y="957.7856">context snippets</text></g><g class="message" data-participant-1="Backend" data-participant-2="Groq"><polygon fill="#181818" points="951.6318,987.9844,961.6318,991.9844,951.6318,995.9844,955.6318,991.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="574.4443" x2="957.6318" y1="991.9844" y2="991.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.2524" x="581.4443" y="986.9185">POST /v1/chat/completions</text></g><g class="message" data-participant-1="Groq" data-participant-2="Backend"><polygon fill="#181818" points="585.4443,1017.1172,575.4443,1021.1172,585.4443,1025.1172,581.4443,1021.1172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="579.4443" x2="967.6318" y1="1021.1172" y2="1021.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.335" x="591.4443" y="1016.0513">bot reply</text></g><g class="message" data-participant-1="Backend" data-participant-2="Frontend"><polygon fill="#181818" points="198.4136,1046.25,188.4136,1050.25,198.4136,1054.25,194.4136,1050.25" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="192.4136" x2="568.4443" y1="1050.25" y2="1050.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.02" x="204.4136" y="1045.1841">JSON { reply, transcript }</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Frontend"><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="229.4136" y1="1079.3828" y2="1079.3828"/><line style="stroke:#181818;stroke-width:1;" x1="229.4136" x2="229.4136" y1="1079.3828" y2="1092.3828"/><line style="stroke:#181818;stroke-width:1;" x1="188.4136" x2="229.4136" y1="1092.3828" y2="1092.3828"/><polygon fill="#181818" points="198.4136,1088.3828,188.4136,1092.3828,198.4136,1096.3828,194.4136,1092.3828" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.8882" x="194.4136" y="1074.3169">Update UI and show transcript</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Storage"><polygon fill="#181818" points="421.5435,1117.5156,431.5435,1121.5156,421.5435,1125.5156,425.5435,1121.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="187.4136" x2="427.5435" y1="1121.5156" y2="1121.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.0791" x="194.4136" y="1116.4497">saveMessages(finalMessages)</text></g><!--SRC=[xLHDRzim3BtxLn2zr05Q5BlcCC3ha3P3lr0dsp5G93OHwaYgfAGpXlttKRRbr8spPcYFyo68fCV7H_5HNle2uNp9FEIbyxY279_Mg3Z2LyaMbgsIX76lBKmTsiGmwoMNXYaFHo4gvnPHGNgFX88RvkK61qV078oiLXwLwCPahbGy9pwsm0hM_E-YlZ3-IA6GZfZpsTsuPcnskz0VI-aCMaZpoQI6DJjTs2WRvpd9p2uQTM7TXLnO_KIv8Bswkgv1OOVABpnCyAU7QtIEfCAeqCz90lI5Eu7JpssjGvYK1i47zAf6xy6T5v8_md5EY-EQQs7rsi0bKwAGQj79M9s7ByPtkHpzDiXqy0Os4o8g0wzXEkx5DqqXQhR1XjgbQoEOnvZA3PBUsAPBGxYxpITmneErqYRb2T3IabFGZaMry3Fg5cKhjyBfM6ueKTllzYJQ8bGK-XTAPvOlKtAiBMUucgCGT7azN7M_MxsL6qvVgkMX0hfofwGnw5sB5VYAf4zES4giUFEfAlgCwvKfq4kjtAwUobfnDoowQkRQWqLJb7qoQblkgEZq-Lj-UmE_QWxutSUoSxlzXfbMJVytepn8nOgjJK9GbGaBX_1TItfS3fcbtDDumZroRKDNaxzCG42sm7Imdr6R0mcrsU5xDQ6TGWuOqMmjf8vpoi9YQkNWy1cgGk115XyuHirREGHlcNBSodaZRHRoz935npKUnEUtuzv8PdoVyIB5ssEzvVa_stjc- -J5PN_Cd0Fv6znIF_UryHsphyGV]--></g></svg>